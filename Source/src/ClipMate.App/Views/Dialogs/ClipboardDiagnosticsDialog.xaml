<dx:ThemedWindow x:Class="ClipMate.App.Views.Dialogs.ClipboardDiagnosticsDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                 xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
                 xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                 xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                 xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                 xmlns:vm="clr-namespace:ClipMate.App.ViewModels"
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type=vm:ClipboardDiagnosticsViewModel}"
                 Title="Clipboard Diagnostics"
                 Width="650"
                 Height="500"
                 MinWidth="500"
                 MinHeight="350"
                 WindowStartupLocation="CenterOwner"
                 ResizeMode="CanResize"
                 ShowInTaskbar="False"
                 Loaded="OnLoaded">

    <!-- Dialog Buttons -->
    <dx:ThemedWindow.DialogButtons>
        <dx:ThemedWindowDialogButton Content="Close"
                                     IsCancel="True"
                                     DialogResult="Cancel" />
        <dx:ThemedWindowDialogButton Content="Help" />
    </dx:ThemedWindow.DialogButtons>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <dxb:ToolBarControl Grid.Row="0">
            <dxb:BarButtonItem Content="Refresh"
                               Command="{Binding RefreshCommand}"
                               Glyph="{dx:DXImage 'SvgImages/Arrows/Refresh.svg'}" />
            <dxb:BarButtonItem Content="Copy"
                               Command="{Binding CopyDiagnosticsCommand}"
                               Glyph="{dx:DXImage 'SvgImages/Edit/Copy.svg'}" />
        </dxb:ToolBarControl>

        <!-- Main Content -->
        <dxlc:LayoutControl Grid.Row="1" Orientation="Vertical" Padding="8">
            <!-- Clipboard Info Section -->
            <dxlc:LayoutGroup Header="Clipboard State" View="GroupBox" Orientation="Vertical">
                <dxlc:LayoutGroup Orientation="Horizontal">
                    <dxlc:LayoutItem Label="Owner:" LabelPosition="Left">
                        <dxe:TextEdit EditValue="{Binding ClipboardOwner, Mode=OneWay}"
                                      IsReadOnly="True" />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Sequence:" LabelPosition="Left">
                        <dxe:TextEdit EditValue="{Binding SequenceNumber, Mode=OneWay}"
                                      IsReadOnly="True" />
                    </dxlc:LayoutItem>
                </dxlc:LayoutGroup>
                <dxlc:LayoutGroup Orientation="Horizontal">
                    <dxlc:LayoutItem Label="Last Refresh:" LabelPosition="Left">
                        <dxe:TextEdit EditValue="{Binding LastRefreshTime, Mode=OneWay, StringFormat='HH:mm:ss'}"
                                      IsReadOnly="True" />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Format Count:" LabelPosition="Left">
                        <dxe:TextEdit EditValue="{Binding Formats.Count, Mode=OneWay}"
                                      IsReadOnly="True" />
                    </dxlc:LayoutItem>
                </dxlc:LayoutGroup>
            </dxlc:LayoutGroup>

            <!-- Formats Grid Section -->
            <dxlc:LayoutGroup Header="Available Formats" View="GroupBox" Orientation="Vertical"
                              VerticalAlignment="Stretch">
                <dxg:GridControl ItemsSource="{Binding Formats}"
                                 AutoGenerateColumns="None"
                                 MinHeight="200">
                    <dxg:GridControl.View>
                        <dxg:TableView AllowEditing="False"
                                       ShowGroupPanel="False"
                                       AutoWidth="True" />
                    </dxg:GridControl.View>
                    <dxg:GridControl.Columns>
                        <dxg:GridColumn FieldName="FormatId"
                                        Header="Format ID" />
                        <dxg:GridColumn FieldName="FormatName"
                                        Header="Format Name" />
                        <dxg:GridColumn FieldName="SizeDisplay"
                                        Header="Size" />
                    </dxg:GridControl.Columns>
                </dxg:GridControl>
            </dxlc:LayoutGroup>
        </dxlc:LayoutControl>

        <!-- Status Bar -->
        <dxb:BarContainerControl ContainerType="Bottom" Grid.Row="2">
            <dxb:StatusBarControl>
                <dxb:BarStaticItem Content="{Binding StatusMessage}" />
            </dxb:StatusBarControl>
        </dxb:BarContainerControl>
    </Grid>
</dx:ThemedWindow>
