<dx:ThemedWindow x:Class="ClipMate.App.Views.Dialogs.SearchDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                 xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                 xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                 xmlns:emoji="clr-namespace:Emoji.Wpf;assembly=Emoji.Wpf"
                 xmlns:vm="clr-namespace:ClipMate.App.ViewModels"
                 xmlns:controls="clr-namespace:ClipMate.App.Controls"
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type=vm:SearchViewModel}"
                 Title="ClipMate Search"
                 Width="500"
                 Height="600"
                 WindowStartupLocation="CenterOwner"
                 ResizeMode="CanResize"
                 ShowInTaskbar="False"
                 SizeToContent="Height">

    <!-- Dialog Buttons -->
    <dx:ThemedWindow.DialogButtons>
        <dx:ThemedWindowDialogButton Content="Go!"
                                     Click="GoButton_Click"
                                     IsDefault="True"
                                     MinWidth="80" />
        <dx:ThemedWindowDialogButton Content="Cancel"
                                     IsCancel="True"
                                     DialogResult="Cancel"
                                     MinWidth="80" />
        <dx:ThemedWindowDialogButton Content="Help"
                                     Click="HelpButton_Click"
                                     MinWidth="80" />
    </dx:ThemedWindow.DialogButtons>

    <dxlc:LayoutControl Orientation="Vertical" Padding="0">
        <!-- Clips Containing Section -->
        <dxlc:LayoutGroup Header="ðŸ” Clips Containing..." View="GroupBox" Orientation="Vertical" IsCollapsible="True">
            <dxlc:LayoutGroup.HeaderTemplate>
                <DataTemplate>
                    <emoji:TextBlock Text="{Binding}" />
                </DataTemplate>
            </dxlc:LayoutGroup.HeaderTemplate>
            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Title" IsChecked="{Binding SearchTitleEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:TextEdit Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                             NullText="Enter search text..."
                             IsEnabled="{Binding SearchTitleEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>

            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Clip TEXT" IsChecked="{Binding SearchClipTextEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:TextEdit Text="{Binding SearchClipText, UpdateSourceTrigger=PropertyChanged}"
                                 NullText="Search in clip content..."
                                 IsEnabled="{Binding SearchClipTextEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>

            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Creator" IsChecked="{Binding SearchCreatorEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:TextEdit Text="{Binding SearchCreator, UpdateSourceTrigger=PropertyChanged}"
                                 NullText="Creator name..."
                                 IsEnabled="{Binding SearchCreatorEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>

            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Source URL" IsChecked="{Binding SearchSourceUrlEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:TextEdit Text="{Binding SearchSourceUrl, UpdateSourceTrigger=PropertyChanged}"
                                 NullText="Source URL..."
                                 IsEnabled="{Binding SearchSourceUrlEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>
        </dxlc:LayoutGroup>

        <!-- Filtering Criteria Section -->
        <dxlc:LayoutGroup Header="ðŸ” Filtering Criteria..." View="GroupBox" Orientation="Vertical"  IsCollapsible="True">
            <dxlc:LayoutGroup.HeaderTemplate>
                <DataTemplate>
                    <emoji:TextBlock Text="{Binding}" />
                </DataTemplate>
            </dxlc:LayoutGroup.HeaderTemplate>
            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Has Format" IsChecked="{Binding HasFormatEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:ComboBoxEdit NullText="Select format..."
                                     EditValue="{Binding SelectedFormat}"
                                     IsEnabled="{Binding HasFormatEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>
            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Captured After" IsChecked="{Binding CapturedAfterEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:DateEdit DateTime="{Binding DateFrom}"
                                 IsEnabled="{Binding CapturedAfterEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>
            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Captured Before" IsChecked="{Binding CapturedBeforeEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:DateEdit DateTime="{Binding DateTo}"
                                 IsEnabled="{Binding CapturedBeforeEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>
            <dxlc:LayoutGroup Orientation="Horizontal">
                <dxlc:LayoutItem HorizontalAlignment="Left" MinWidth="150">
                    <CheckBox Content="Member of Collection" IsChecked="{Binding MemberOfCollectionEnabled}" />
                </dxlc:LayoutItem>
                <dxlc:LayoutItem HorizontalAlignment="Stretch">
                    <dxe:ComboBoxEdit NullText="Select collection..."
                                     EditValue="{Binding SelectedCollection}"
                                     IsEnabled="{Binding MemberOfCollectionEnabled}" />
                </dxlc:LayoutItem>
            </dxlc:LayoutGroup>

            <dxlc:LayoutGroup Orientation="Horizontal">
                <CheckBox Content="Encrypted" IsChecked="{Binding EncryptedOnly}" Margin="0,0,20,0" />
                <CheckBox Content="Has Shortcut" IsChecked="{Binding HasShortcutOnly}" Margin="0,0,20,0" />
                <CheckBox Content="Included Deleted Clips" IsChecked="{Binding IncludeDeletedClips}" />
            </dxlc:LayoutGroup>
        </dxlc:LayoutGroup>

        <!-- SQL Section -->
        <dxlc:LayoutGroup Header="ðŸ” SQL" View="GroupBox" Orientation="Vertical" IsCollapsible="True" IsCollapsed="True">
            <dxlc:LayoutGroup.HeaderTemplate>
                <DataTemplate>
                    <emoji:TextBlock Text="{Binding}" />
                </DataTemplate>
            </dxlc:LayoutGroup.HeaderTemplate>
            <controls:MonacoEditorControl x:Name="SqlEditor"
                                          Height="150"
                                          Text="{Binding SqlQuery, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                          Language="sql"
                                          IsReadOnly="False"
                                          ShowToolbar="False" />
        </dxlc:LayoutGroup>

        <!-- Save/Recall Stored Queries Section -->
        <dxlc:LayoutGroup Header="ðŸ” Save/Recall Stored Queries" View="GroupBox" Orientation="Vertical" IsCollapsible="True">
            <dxlc:LayoutGroup.HeaderTemplate>
                <DataTemplate>
                    <emoji:TextBlock Text="{Binding}" />
                </DataTemplate>
            </dxlc:LayoutGroup.HeaderTemplate>
            <dxlc:LayoutItem>
                <dxe:ComboBoxEdit NullText="Select saved query..."
                                 ItemsSource="{Binding SearchHistory}"
                                 EditValue="{Binding SelectedSavedQuery}" />
            </dxlc:LayoutItem>

            <dxlc:LayoutGroup Orientation="Horizontal" VerticalAlignment="Top">
                <dx:SimpleButton Content="Save" Width="80" Margin="0,0,10,0"
                                Command="{Binding SaveQueryCommand}" />
                <dx:SimpleButton Content="Rename" Width="80" Margin="0,0,10,0"
                                Command="{Binding RenameQueryCommand}" />
                <dx:SimpleButton Content="Delete" Width="80"
                                Command="{Binding DeleteQueryCommand}" />
            </dxlc:LayoutGroup>
        </dxlc:LayoutGroup>
    </dxlc:LayoutControl>
</dx:ThemedWindow>
