<dx:ThemedWindow x:Class="ClipMate.App.Views.Dialogs.EventLogDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                 xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
                 xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                 xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                 xmlns:vm="clr-namespace:ClipMate.App.ViewModels"
                 xmlns:emoji="clr-namespace:Emoji.Wpf;assembly=Emoji.Wpf"
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type=vm:EventLogViewModel}"
                 Title="ClipMate Event Log"
                 Width="900"
                 Height="600"
                 MinWidth="600"
                 MinHeight="400"
                 WindowStartupLocation="CenterOwner"
                 ResizeMode="CanResize"
                 ShowInTaskbar="False">

    <!-- Dialog Buttons -->
    <dx:ThemedWindow.DialogButtons>
        <dx:ThemedWindowDialogButton Content="Close"
                                     IsCancel="True"
                                     DialogResult="Cancel" />
        <dx:ThemedWindowDialogButton Content="Help" />
    </dx:ThemedWindow.DialogButtons>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <dxb:ToolBarControl Grid.Row="0">
            <dxb:BarButtonItem Content="Clear Log"
                               Command="{Binding ClearLogCommand}"
                               Glyph="{dx:DXImage 'SvgImages/Edit/Delete.svg'}" />
            <dxb:BarItemSeparator />
            <dxb:BarStaticItem Content="Level:" />
            <dxb:BarEditItem EditWidth="100">
                <dxb:BarEditItem.EditSettings>
                    <dxe:ComboBoxEditSettings ItemsSource="{Binding AvailableLogLevels}"
                                              IsTextEditable="False" />
                </dxb:BarEditItem.EditSettings>
                <dxb:BarEditItem.EditValue>
                    <Binding Path="SelectedLevel" Mode="TwoWay" />
                </dxb:BarEditItem.EditValue>
            </dxb:BarEditItem>
            <dxb:BarStaticItem Content="Search:" />
            <dxb:BarEditItem EditWidth="200">
                <dxb:BarEditItem.EditSettings>
                    <dxe:TextEditSettings NullText="Filter events..." />
                </dxb:BarEditItem.EditSettings>
                <dxb:BarEditItem.EditValue>
                    <Binding Path="FilterText" Mode="TwoWay" UpdateSourceTrigger="PropertyChanged" />
                </dxb:BarEditItem.EditValue>
            </dxb:BarEditItem>
            <dxb:BarCheckItem Content="Auto-scroll"
                              IsChecked="{Binding AutoScroll, Mode=TwoWay}" />
        </dxb:ToolBarControl>

        <!-- Event Log Grid -->
        <dxg:GridControl x:Name="EventGrid"
                         Grid.Row="1"
                         ItemsSource="{Binding FilteredEvents}"
                         AutoGenerateColumns="None"
                         Margin="8">
            <dxg:GridControl.SortInfo>
                <dxg:GridSortInfo FieldName="TimeStamp" SortOrder="Ascending" />
            </dxg:GridControl.SortInfo>
            <dxg:GridControl.View>
                <dxg:TableView AllowEditing="False"
                               ShowGroupPanel="False"
                               HorizontalScrollbarVisibility="Auto"/>
            </dxg:GridControl.View>
            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="IconGlyph"
                                Header=""
                                AllowSorting="False"
                                Width="30">
                    <dxg:GridColumn.CellTemplate>
                        <DataTemplate>
                            <emoji:TextBlock Text="{Binding Value}"
                                             HorizontalAlignment="Left"
                                             VerticalAlignment="Center"
                                             Margin="3,0,0,0"
                                             ToolTip="{Binding Value}" />
                        </DataTemplate>
                    </dxg:GridColumn.CellTemplate>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="Timestamp"
                                Header="Time"
                                SortOrder="Ascending"
                                SortIndex="0">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings DisplayFormat="g" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="Level"
                                Header="Level"/>
                <dxg:GridColumn FieldName="Category"
                                Header="Category"/>
                <dxg:GridColumn FieldName="Message"
                                Header="Message"
                                Width="Auto"/>
            </dxg:GridControl.Columns>
        </dxg:GridControl>

        <!-- Status Bar -->
        <dxb:BarContainerControl ContainerType="Bottom" Grid.Row="2">
            <dxb:StatusBarControl>
                <dxb:BarStaticItem Content="{Binding Events.Count, StringFormat='Total events: {0}'}" />
            </dxb:StatusBarControl>
        </dxb:BarContainerControl>
    </Grid>
</dx:ThemedWindow>
