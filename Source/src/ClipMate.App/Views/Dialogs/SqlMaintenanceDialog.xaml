<dx:ThemedWindow x:Class="ClipMate.App.Views.Dialogs.SqlMaintenanceDialog"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                 xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                 xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
                 xmlns:controls="clr-namespace:ClipMate.App.Controls"
                 xmlns:vm="clr-namespace:ClipMate.App.ViewModels"
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type=vm:SqlMaintenanceViewModel}"
                 Title="ClipMate Database SQL Maintenance - Use Extreme Caution!"
                 Width="900"
                 Height="650"
                 MinWidth="600"
                 MinHeight="400"
                 WindowStartupLocation="CenterOwner"
                 ResizeMode="CanResize"
                 ShowInTaskbar="False">

    <dx:ThemedWindow.Resources>
    </dx:ThemedWindow.Resources>

    <!-- Dialog Buttons -->
    <dx:ThemedWindow.DialogButtons>
        <dx:ThemedWindowDialogButton Content="Execute SQL"
                                     Click="ExecuteSqlButton_Click"
                                     AllowCloseWindow="False"
                                     Placement="Left" />
        <dx:ThemedWindowDialogButton Content="Save Result To File..."
                                     Click="SaveResultButton_Click"
                                     AllowCloseWindow="False"
                                     Placement="Left" />
        <dx:ThemedWindowDialogButton Content="OK"
                                     Click="OkButton_Click"
                                     IsDefault="True" />
        <dx:ThemedWindowDialogButton Content="Cancel"
                                     Click="CancelButton_Click"
                                     IsCancel="True" />
        <dx:ThemedWindowDialogButton Content="Help"
                                     Click="HelpButton_Click" />
    </dx:ThemedWindow.DialogButtons>

    <dxlc:LayoutControl Orientation="Vertical" Padding="8">
        <!-- Database Header -->
        <dxlc:LayoutItem>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Current Database: " FontWeight="Bold" VerticalAlignment="Center" />
                <TextBlock Text="{Binding DatabaseName}" Foreground="Blue" VerticalAlignment="Center" />
            </StackPanel>
        </dxlc:LayoutItem>

        <!-- SQL Query Section -->
        <dxlc:LayoutGroup Header="SQL Query/Command To Execute:" View="GroupBox" Orientation="Vertical">
            <controls:MonacoEditorControl x:Name="SqlEditor"
                                          Height="180"
                                          Text="{Binding SqlQuery, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                          Language="sql"
                                          IsReadOnly="False"
                                          ShowToolbar="False" />
        </dxlc:LayoutGroup>

        <!-- Results Section -->
        <dxlc:LayoutGroup Header="Results:" View="GroupBox" Orientation="Vertical" VerticalAlignment="Stretch">
            <dxg:GridControl x:Name="ResultsGrid"
                             ItemsSource="{Binding ResultsTable}"
                             AutoGenerateColumns="AddNew"
                             MinHeight="200">
                <dxg:GridControl.View>
                    <dxg:TableView AllowEditing="False"
                                   ShowGroupPanel="False"
                                   AllowColumnFiltering="False" />
                </dxg:GridControl.View>
            </dxg:GridControl>
        </dxlc:LayoutGroup>

        <!-- Status Bar -->
        <dxlc:LayoutItem VerticalAlignment="Bottom">
            <TextBlock Text="{Binding StatusMessage}"
                       Margin="0,4,0,0"
                       FontStyle="Italic" />
        </dxlc:LayoutItem>
    </dxlc:LayoutControl>
</dx:ThemedWindow>
